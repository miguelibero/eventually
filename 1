In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:89:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>)’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:89:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>)’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:89:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:89:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, dispatcher_then_shared_Test::TestBody()::__lambda13) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, dispatcher_then_shared_Test::TestBody()::__lambda13) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>’ to ‘dispatcher_then_shared_Test::TestBody()::__lambda13’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda13>’ to ‘dispatcher_then_shared_Test::TestBody()::__lambda13’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:89:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:89:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_process_one_Test::TestBody()::__lambda6; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:14:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_process_one_Test::TestBody()::__lambda6; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:14:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >(int, int)>}’ to ‘std::function<int()>&&’
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_one_Test::TestBody()::__lambda6> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> >; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)>; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:31:57:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> >; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)>; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:31:57:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::function<int()>&&’
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_bind_Test::TestBody()::__lambda7(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_then_Test::TestBody()::__lambda8; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:46:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_then_Test::TestBody()::__lambda8; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:46:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda8> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:50:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>)’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:50:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>)’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:50:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:50:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, dispatcher_then_Test::TestBody()::__lambda9&) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, dispatcher_then_Test::TestBody()::__lambda9&) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>’ to ‘dispatcher_then_Test::TestBody()::__lambda9&’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<dispatcher_then_Test::TestBody()::__lambda9>’ to ‘dispatcher_then_Test::TestBody()::__lambda9&’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:50:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:50:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> >; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)>; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:70:59:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> >; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)>; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:70:59:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda10(std::_Placeholder<1>, std::_Placeholder<2>, int)> > >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:71:63:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >)’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:71:63:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >)’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:71:63:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:71:63:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >’ to ‘std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)> >’ to ‘std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:71:63:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:71:63:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_then_shared_Test::TestBody()::__lambda12; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:85:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_then_shared_Test::TestBody()::__lambda12; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:85:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_shared_Test::TestBody()::__lambda12> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_then_combined_Test::TestBody()::__lambda14; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:106:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_then_combined_Test::TestBody()::__lambda14; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:106:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda14> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:108:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>)’
             }, f, protect(w));
                             ^
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:108:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: error: no matching function for call to ‘eventually::dispatcher::dispatch(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4, std::shared_future<int>&, eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>)’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...)
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:108:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In substitution of ‘template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4; Args = {std::shared_future<int>&, eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>}]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:108:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: error: no match for call to ‘(eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4) (std::shared_future<int>&, eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>&)’
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:30: note: candidates are:
             return dispatch([](std::shared_future<Result> f, Work w){
                              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, dispatcher_then_combined_Test::TestBody()::__lambda15&) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note: float (*)(std::shared_future<int>, dispatcher_then_combined_Test::TestBody()::__lambda15&) <conversion>
         auto dispatch(Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
                                                                                            ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:42:92: note:   candidate expects 3 arguments, 3 provided
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>’ to ‘dispatcher_then_combined_Test::TestBody()::__lambda15&’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note: eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4
             return dispatch([](std::shared_future<Result> f, Work w){
                                                                    ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:73:68: note:   no known conversion for argument 2 from ‘eventually::protect_t<dispatcher_then_combined_Test::TestBody()::__lambda15>’ to ‘dispatcher_then_combined_Test::TestBody()::__lambda15&’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:108:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In instantiation of ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:67:37:   required from ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::future<_Res>&&, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15; decltype (w(f.get())) = float]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:108:6:   required from here
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note: template<class Work, class ... Args> std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...)
         auto dispatch(connection& c, Work&& w, Args&&... args) noexcept ->  std::future<decltype(w(args...))>
              ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:54:14: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:75:29: note:   cannot convert ‘<lambda closure object>eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4{}’ (type ‘eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]::__lambda4’) to type ‘eventually::connection&’
             }, f, protect(w));
                             ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional: In instantiation of ‘struct std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>’:
/home/mibero/Projects/eventually/src/eventually/task.hpp:53:54:   required from ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>; Args = {}; Result = void]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_Test::TestBody()::__lambda16; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:124:6:   required from here
/usr/include/c++/4.8/functional:1347:37: error: no match for call to ‘(eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>) ()’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional: In instantiation of ‘struct std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>’:
/home/mibero/Projects/eventually/src/eventually/task.hpp:53:54:   required from ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>; Args = {}; Result = void]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_Test::TestBody()::__lambda16; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:124:6:   required from here
/usr/include/c++/4.8/functional:1347:37: error: no match for call to ‘(eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>) ()’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:12:11: note: candidates are:
     class protect_t
           ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:12:11: note: candidates are:
     class protect_t
           ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) [with Result = Result; Args = {Args ...}; F = dispatcher_connection_Test::TestBody()::__lambda16]
         Result operator()(Args&&... args)
                ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) [with Result = Result; Args = {Args ...}; F = dispatcher_connection_Test::TestBody()::__lambda16]
         Result operator()(Args&&... args)
                ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) const [with Result = Result; Args = {Args ...}; F = dispatcher_connection_Test::TestBody()::__lambda16]
         Result operator()(Args&&... args) const
                ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) const [with Result = Result; Args = {Args ...}; F = dispatcher_connection_Test::TestBody()::__lambda16]
         Result operator()(Args&&... args) const
                ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>; Args = {}; Result = void]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_Test::TestBody()::__lambda16; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:124:6:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: error: no matching function for call to ‘std::function<void()>::function(std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>; Args = {}; Result = void]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_Test::TestBody()::__lambda16; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:124:6:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: error: no matching function for call to ‘std::function<void()>::function(std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = void; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = void; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>}’ to ‘std::function<void()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>}’ to ‘std::function<void()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = void; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = void; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>}’ to ‘const std::function<void()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>}’ to ‘const std::function<void()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = void; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = void; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_Test::TestBody()::__lambda16>()>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = void; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = void; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional: In instantiation of ‘struct std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>’:
/home/mibero/Projects/eventually/src/eventually/task.hpp:53:54:   required from ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>; Args = {}; Result = void]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:141:6:   required from here
/usr/include/c++/4.8/functional:1347:37: error: no match for call to ‘(eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>) ()’
  = decltype( std::declval<_Functor>()(
                                     ^
/usr/include/c++/4.8/functional: In instantiation of ‘struct std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>’:
/home/mibero/Projects/eventually/src/eventually/task.hpp:53:54:   required from ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>; Args = {}; Result = void]’
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:141:6:   required from here
/usr/include/c++/4.8/functional:1347:37: error: no match for call to ‘(eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>) ()’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:12:11: note: candidates are:
     class protect_t
           ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:12:11: note: candidates are:
     class protect_t
           ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) [with Result = Result; Args = {Args ...}; F = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17]
         Result operator()(Args&&... args)
                ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) [with Result = Result; Args = {Args ...}; F = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17]
         Result operator()(Args&&... args)
                ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:22:16: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) const [with Result = Result; Args = {Args ...}; F = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17]
         Result operator()(Args&&... args) const
                ^
In file included from /home/mibero/Projects/eventually/src/eventually/task.hpp:8:0,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note: template<class Result, class ... Args> Result eventually::protect_t<F>::operator()(Args&& ...) const [with Result = Result; Args = {Args ...}; F = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17]
         Result operator()(Args&&... args) const
                ^
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note:   template argument deduction/substitution failed:
/home/mibero/Projects/eventually/src/eventually/protect.hpp:28:16: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:1347:37: note:   couldn't deduce template parameter ‘Result’
  = decltype( std::declval<_Functor>()(
                                     ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>; Args = {}; Result = void]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:141:6:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: error: no matching function for call to ‘std::function<void()>::function(std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(eventually::connection&, Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>; Args = {}; Result = void]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:57:71:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(eventually::connection&, Work&&, Args&& ...) [with Work = dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17; Args = {}; decltype (w(eventually::dispatcher::dispatch::args ...)) = void]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:141:6:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: error: no matching function for call to ‘std::function<void()>::function(std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:54:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = void; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = void; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>}’ to ‘std::function<void()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>}’ to ‘std::function<void()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = void; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = void; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>}’ to ‘const std::function<void()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>}’ to ‘const std::function<void()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = void; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = void; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>&>::type {aka std::_Bind<eventually::protect_t<dispatcher_connection_interrupted_exception_Test::TestBody()::__lambda17>()>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = void; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = void; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_process_all_Test::TestBody()::__lambda18; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:166:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_process_all_Test::TestBody()::__lambda18; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:166:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda18> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_process_all_Test::TestBody()::__lambda19; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:170:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5:0,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/home/mibero/Projects/eventually/src/eventually/task.hpp: In instantiation of ‘eventually::task<Result>::task(Work&&, Args&& ...) [with Work = eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19>; Args = {int&, int&}; Result = int]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:46:68:   required from ‘std::future<decltype (w(eventually::dispatcher::dispatch::args ...))> eventually::dispatcher::dispatch(Work&&, Args&& ...) [with Work = dispatcher_process_all_Test::TestBody()::__lambda19; Args = {int, int}; decltype (w(eventually::dispatcher::dispatch::args ...)) = int]’
/home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:170:12:   required from here
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: error: no matching function for call to ‘std::function<int()>::function(std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type)’
         _task(std::bind(&task::get_work_done, this))
                                                    ^
/home/mibero/Projects/eventually/src/eventually/task.hpp:47:52: note: candidates are:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.8/future:38:0,
                 from /home/mibero/Projects/eventually/src/eventually/task.hpp:5,
                 from /home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:5,
                 from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:
/usr/include/c++/4.8/functional:2443:7: note: template<class _Functor, class> std::function<_Res(_ArgTypes ...)>::function(_Functor)
       function<_Res(_ArgTypes...)>::
       ^
/usr/include/c++/4.8/functional:2443:7: note:   template argument deduction/substitution failed:
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2226:7: note: std::function<_Res(_ArgTypes ...)>::function(std::function<_Res(_ArgTypes ...)>&&) [with _Res = int; _ArgTypes = {}]
       function(function&& __x) : _Function_base()
       ^
/usr/include/c++/4.8/functional:2226:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >(int, int)>}’ to ‘std::function<int()>&&’
/usr/include/c++/4.8/functional:2429:5: note: std::function<_Res(_ArgTypes ...)>::function(const std::function<_Res(_ArgTypes ...)>&) [with _Res = int; _ArgTypes = {}]
     function<_Res(_ArgTypes...)>::
     ^
/usr/include/c++/4.8/functional:2429:5: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >(int, int)>}’ to ‘const std::function<int()>&’
/usr/include/c++/4.8/functional:2206:7: note: std::function<_Res(_ArgTypes ...)>::function(std::nullptr_t) [with _Res = int; _ArgTypes = {}; std::nullptr_t = std::nullptr_t]
       function(nullptr_t) noexcept
       ^
/usr/include/c++/4.8/functional:2206:7: note:   no known conversion for argument 1 from ‘std::_Bind_helper<false, eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >, int&, int&>::type {aka std::_Bind<eventually::protect_t<eventually::protect_t<dispatcher_process_all_Test::TestBody()::__lambda19> >(int, int)>}’ to ‘std::nullptr_t’
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
/usr/include/c++/4.8/functional:2199:7: note: std::function<_Res(_ArgTypes ...)>::function() [with _Res = int; _ArgTypes = {}]
       function() noexcept
       ^
/usr/include/c++/4.8/functional:2199:7: note:   candidate expects 0 arguments, 1 provided
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
In file included from /home/mibero/Projects/eventually/test/tests/dispatcher_test.cpp:2:0:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_Test::TestBody()::__lambda9&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = std::_Bind<dispatcher_then_bind_Test::TestBody()::__lambda11(std::_Placeholder<1>, float)>&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_shared_Test::TestBody()::__lambda13; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp: In member function ‘std::future<decltype (w(f.get()))> eventually::dispatcher::then(std::shared_future<_Res>, Work&&) [with Result = int; Work = dispatcher_then_combined_Test::TestBody()::__lambda15&; decltype (w(f.get())) = float]’:
/home/mibero/Projects/eventually/src/eventually/dispatcher.hpp:76:9: warning: control reaches end of non-void function [-Wreturn-type]
         }
         ^
make[2]: *** [CMakeFiles/runUnitTests.dir/test/tests/dispatcher_test.cpp.o] Error 1
make[2]: *** [CMakeFiles/runUnitTests.dir/test/tests/dispatcher_test.cpp.o] Error 1
make[1]: *** [CMakeFiles/runUnitTests.dir/all] Error 2
make[1]: *** [CMakeFiles/runUnitTests.dir/all] Error 2
make: *** [all] Error 2
make: *** [all] Error 2
